(()=>{"use strict";function t(t,e,a){const o=document.createElement(t);for(let t=0;t<e.length;t+=1)o.classList.add(e[t]);return Object.entries(a).forEach((([t,e])=>{o.setAttribute(t,e)})),o}class e{constructor(){e.initForm(),e.setupCountrySelect(),e.setupSignUpButton()}static initForm(){const a=document.createElement("div");a.id="form-container",document.body.append(a);const o=document.createElement("h2");o.textContent="Registration Form",o.classList.add("title"),a.append(o);const s=document.createElement("div");s.id="registration-form-container",a.append(s),[{type:"text",placeholder:"First Name*",validationFn:e.validateName,attributes:{autocomplete:"off"}},{type:"text",placeholder:"Last Name*",validationFn:e.validateName,attributes:{autocomplete:"off"}},{type:"date",placeholder:"Date of Birth",validationFn:e.validateDateOfBirth,attributes:{autocomplete:"off"}},{type:"text",placeholder:"Street*",validationFn:e.validateRequiredField,attributes:{autocomplete:"off"}},{type:"text",placeholder:"City*",validationFn:e.validateName,attributes:{autocomplete:"off"}},{type:"text",placeholder:"Postal Code*",validationFn:e.validatePostalCode,attributes:{autocomplete:"off"}},{type:"email",placeholder:"Email*",validationFn:e.validateEmail,attributes:{autocomplete:"off"}},{type:"password",placeholder:"Password*",validationFn:e.validatePassword,attributes:{autocomplete:"off"}}].forEach((e=>{const a=t("input",["form-control"],{type:e.type,placeholder:e.placeholder,...e.attributes});if("password"===e.type){const t=document.createElement("div");t.classList.add("password-input-wrapper"),a.classList.add("password-input");const e=document.createElement("i");e.classList.add("password-icon","fa","fa-eye"),e.addEventListener("click",(()=>{const t="text"===a.type;a.type=t?"password":"text",e.classList.toggle("fa-eye-slash",!t),e.classList.toggle("fa-eye",t)})),t.append(a),t.append(e),s.append(t)}else s.append(a);a.addEventListener("input",(()=>{e.validationFn(a)})),a.addEventListener("blur",(()=>e.validationFn(a)))}));const r=t("button",["btn","btn-submit"],{type:"submit"});r.textContent="Sign up",s.append(r)}static setupSignUpButton(){document.querySelector(".btn-submit").addEventListener("click",(t=>{t.preventDefault(),e.checkFormValidity(),e.isFormValid&&alert("All fields are filled correctly. You can now submit the form!")}))}static checkFormValidity(){const t=document.getElementById("registration-form-container"),a=t?.querySelectorAll("input, select");e.isFormValid=!0,a&&a.forEach((t=>{if((t instanceof HTMLInputElement||t instanceof HTMLSelectElement)&&(""===t.value.trim()||t.classList.contains("error"))){t.classList.add("error");const a=document.querySelector(".password-input-wrapper");a?.classList.add("error"),e.isFormValid=!1}}))}static validateName(t){const e=t.value.trim(),a=/^[a-zA-Z]+$/.test(e);t.classList.toggle("error",!a),t.classList.toggle("correct",a)}static validateDateOfBirth(t){const e=new Date(t.value),a=new Date,o=new Date(a.getFullYear()-13,a.getMonth(),a.getDate()),s=new Date(a.getFullYear()-130,a.getMonth(),a.getDate()),r=!Number.isNaN(e.getTime())&&e<=a&&e>=s&&e<o;t.classList.toggle("error",!r),t.classList.toggle("correct",r)}static validateRequiredField(t){const e=""!==t.value.trim();t.classList.toggle("error",!e),t.classList.toggle("correct",e)}static validateEmail(t){const a=t.value.trim(),o=!a||!e.isValidEmailFormat(a);t.classList.toggle("error",o),t.classList.toggle("correct",!o)}static isValidEmailFormat(t){return/^\S+@\S+\.\S+$/.test(t)}static validatePassword(t){const e=t.value.trim(),a=document.querySelector(".password-input-wrapper"),o=/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}$/.test(e);a?.classList.toggle("error",!o),a?.classList.toggle("correct",o),t.classList.toggle("error",!o),t.classList.toggle("correct",o)}static setupCountrySelect(){const a=t("select",["form-control"],{autocomplete:"off"});a.classList.add("select-country");const o=document.createElement("option");o.value="",o.textContent="Select country*",a.append(o),["United States of America"].forEach((t=>{const e=document.createElement("option");e.value=t,e.textContent=t,a.append(e)}));const s=document.getElementById("registration-form-container");if(s){const t=s.querySelector('input[placeholder="Postal Code*"]');t&&t.parentElement?.insertBefore(a,t)}a.addEventListener("blur",(()=>{e.validateCountry(a)}))}static validateCountry(t){const e=()=>{const e=""!==t.value;t.classList.toggle("error",!e),t.classList.toggle("correct",e)};e(),t.addEventListener("change",e)}static validatePostalCode(t){const e=t.value.trim(),a="United States of America"===document.querySelector("select.select-country").value,o=/^\d{5}(-\d{4})?$/.test(e);t.classList.toggle("error",!(a&&o)),t.classList.toggle("correct",a&&o)}}e.isFormValid=!1,new e})();